/* Chat Messages */
.chat-message {
	margin: 7px 4px;
	padding: 0.75em 1em;
	font-size: var(--font-size-12);
	color: var(--dh-color-off-white);
	background: rgba(11, 10, 19, 0.8392156863);
	border: 1px solid #6d6795;
	backdrop-filter: blur(5px);
	border-radius: 10px;

	.message-header {
		line-height: 20px;
		color: var(--dh-color-off-white);
		font-weight: 100;
		font-size: var(--font-size-12);
		margin-bottom: 0.5em;

		.flavor-text,
		.whisper-to {
			flex: 0 0 100%;
			font-size: var(--font-size-12);
		}

		.message-sender {
			flex: 3;
			margin: 0;
			white-space: nowrap;
			text-transform: uppercase;
			color: var(--dh-color-teal);
		}
	}

	.dice-roll .dice-formula,
	.dice-roll .dice-total {
		flex: 0 0 100%;
		position: relative;
		margin: 0;
		line-height: 24px;
		text-align: center;
		background: rgba(11, 10, 19, 0.8392156863);
		border: 1px solid #6d6795;
		box-shadow: none;
		border-radius: 10px;
		word-break: break-all;
		margin-top: 0.25em;
		margin-bottom: 0.25em;
	}

	.message-content {
		-webkit-user-select: text;
		-moz-user-select: text;
		-ms-user-select: text;
		user-select: text;
		word-break: break-word;
		padding-bottom: 0.5em;

		p {
			margin: 0px;
			font-size: var(--font-size-14);
			font-weight: 200;
		}
	}

	&.whisper {
		background: #292941;
		border: 1px solid var(--dh-color-purple-light);
	}

	/* Roll Outcome Styling */
	.roll-outcome {
		font-size: 1.25em;
		font-weight: bold;

		&.success,
		&.failure {
			color: var(--dh-color-gold);
		}
	}

	.roll-effect {
		font-size: 12px;
		color: #6c6a85;
		font-weight: lighter;
		margin-top: 0;
		margin-bottom: 0.25em;

		/* Hope roll effect styling */
		&.hope-effect {
			color: var(--dh-color-gold);
			font-weight: 600;
			text-shadow: 0 0 5px rgba(243, 194, 103, 0.6);
		}

		/* Fear roll effect styling */
		&.fear-effect {
			color: #3b75c2;
			font-weight: 600;
			text-shadow: 0 0 5px rgba(59, 117, 194, 0.6);
		}
	}

	.roll-flavor-line {
		margin: 0;
	}

	.duality-roll-button {
		margin: 0.25rem 0;
	}
}

/* Hope and Fear Roll Background Styling */
.chat-message.dh-hope-roll {
	background: linear-gradient(135deg, rgba(96, 69, 20, 0.8) 0%, rgb(206, 134, 41) 100%);
	border: 1px solid rgba(243, 194, 103, 0.8);
	box-shadow: 0 2px 8px rgba(243, 194, 103, 0.3);

	&.whisper {
		background: linear-gradient(135deg, rgba(96, 69, 20, 0.8) 0%, rgb(206, 134, 41) 100%);
		border: 1px solid rgba(243, 194, 103, 0.7);
	}
}

.chat-message.dh-fear-roll {
	background: linear-gradient(135deg, rgba(30, 24, 77, 0.8) 0%, rgba(63, 81, 181, 0.6) 100%);
	border: 1px solid rgba(63, 81, 181, 0.8);
	box-shadow: 0 2px 8px rgba(63, 81, 181, 0.3);

	&.whisper {
		background: linear-gradient(135deg, rgba(30, 24, 77, 0.7) 0%, rgba(63, 81, 181, 0.5) 100%);
		border: 1px solid rgba(63, 81, 181, 0.7);
	}
}

/* Remove padding and default styling from chat messages that contain an item card */
.chat-message:has(.item-card-chat) {
	padding: 0;
	background: transparent;
	border: none;
	backdrop-filter: none;
}

/* Daggerheart Chat Cards */
.daggerheart.chat-card.item-card {
	display: flex;
	flex-direction: row-reverse;
	padding: 0px;
	margin: 0px;
	justify-content: flex-end;
	align-items: center;
	gap: 1em;
	color: var(--dh-color-gold);
	font-size: 1.25em;
	border-bottom: 1px solid rgba(216, 216, 214, 0.1490196078);
	margin-bottom: 0.5em;

	h3 {
		border-bottom: none;
		padding: 0px;
		margin: 0px;
	}

	img {
		box-sizing: border-box;
		border-radius: 10px;
		width: 50px;
		height: 50px;
		object-fit: cover;
		object-position: top;
		border: 2px solid var(--dh-color-gray);
	}

	.flexrow {
		display: flex;
		width: 100%;
	}
}

/* Item Card in Chat */
.message-content .item-card-chat {
	width: 100%;
	max-width: 300px;
	margin-left: auto;
	margin-right: auto;
	box-sizing: border-box;
	margin: 0;
	border: 1px solid #6d6795;
	border-radius: 10px;
	overflow: hidden;
	background: rgba(11, 10, 19, 0.8392156863);
	backdrop-filter: blur(5px);
	color: var(--dh-color-off-white);
}

.item-card-chat {
	.card-image-container {
		height: 150px;
		background-size: cover;
		background-position: center;
		position: relative;
		display: flex;
		flex-direction: column;
		justify-content: flex-end;
		padding: 10px;
		color: white;
		border-bottom: 1px solid var(--dh-color-gold);

		&::after {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 60%);
			z-index: 0;
		}
	}

	.card-header-text {
		z-index: 10;
		position: relative;

		h3 {
			margin: 0;
			font-size: 1.5em;
			font-weight: bold;
			border: none;
			color: var(--dh-color-gold);
			text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.8);
		}
	}

	.card-content {
		padding: 15px;
	}

	.card-badges {
		display: flex;
		flex-wrap: wrap;
		gap: 6px;
		margin-bottom: 10px;

		.badge {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			padding: 4px 8px;
			background: rgba(243, 194, 103, 0.12);
			border: 1px solid rgba(243, 194, 103, 0.25);
			border-radius: 999px;
			color: var(--dh-color-gold);
			font-size: 0.75em;
			font-weight: 600;
			line-height: 1;

			.b-label {
				color: #cfc9f0;
				font-weight: 500;
				opacity: 0.9;
			}
		}
	}

	.card-stats {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 6px 12px;
		margin-bottom: 10px;

		.stat {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 6px 8px;
			background: rgba(0, 0, 0, 0.2);
			border: 1px solid #433f64;
			border-radius: 6px;

			.label {
				font-size: 0.75em;
				text-transform: uppercase;
				color: #9d9bb3;
				letter-spacing: 0.04em;
			}
			.value {
				font-weight: 600;
				color: var(--dh-color-off-white);
			}
		}
	}

	.card-subtitle {
		font-size: 0.8em;
		text-transform: uppercase;
		color: var(--dh-color-gray);
		opacity: 0.8;
		margin-bottom: 10px;
		border-bottom: 1px solid #433f64;
		padding-bottom: 5px;
	}

	.card-description {
		font-size: 0.9em;

		p {
			margin: 0.5em 0;

			&:first-child {
				margin-top: 0;
			}

			&:last-child {
				margin-bottom: 0;
			}
		}

		/* Override dark header colors in item-card-chat descriptions */
		h1,
		h2,
		h3,
		h4,
		h5,
		h6 {
			color: var(--dh-color-off-white) !important;
			text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
		}
	}
}

/* Damage Roll Button in Chat */
.damage-roll-button {
	background: rgba(11, 10, 19, 0.85);
	border: 1px solid #433f64;
	border-radius: 1em;
	color: #f3c267;
	padding: 0.5em 1em;
	cursor: pointer;
	font-size: 1.15em;
	font-weight: 600;
	transition: all 0.3s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 0.5em;

	&:hover {
		background: rgba(35, 34, 43, 0.9);
		border-color: #f3c267;
		transform: translateY(-1px);
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
	}

	i {
		color: #f3c267;
	}

	/* Critical Damage Button Styling */
	&.critical {
		background: rgba(35, 10, 10, 0.85);
		border-color: #ff6b6b;
		color: #ff6b6b;
		animation: criticalGlow 2s ease-in-out infinite;

		&:hover {
			background: rgba(55, 15, 15, 0.9);
			border-color: #ff9999;
			box-shadow: 0 2px 8px rgba(255, 107, 107, 0.4);
		}

		i {
			color: #ff6b6b;
		}
	}
}

@keyframes criticalGlow {
	0%,
	100% {
		box-shadow: 0 0 5px rgba(255, 107, 107, 0.5);
	}

	50% {
		box-shadow:
			0 0 10px rgba(255, 107, 107, 0.8),
			0 0 20px rgba(255, 107, 107, 0.4);
	}
}

/* Damage Application Buttons */
.damage-application-buttons {
	display: flex;
	gap: 0.25em;
	margin-top: 0.5em;
}

.apply-damage-button,
.apply-healing-button {
	flex: 1;
	background: rgba(11, 10, 19, 0.85);
	border: 1px solid #433f64;
	border-radius: 0.75em;
	color: #f3c267;
	padding: 0.4em 0.8em;
	cursor: pointer;
	font-size: 1em;
	font-weight: 600;
	transition: all 0.3s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 0.4em;

	&:hover {
		background: rgba(35, 34, 43, 0.9);
		transform: translateY(-1px);
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
	}

	&:disabled {
		cursor: not-allowed;
		opacity: 0.5;
		transform: none;
	}

	i {
		font-size: 0.9em;
	}
}

.apply-damage-button {
	border-color: #b94a48;
	color: #ff6b6b;

	&:hover {
		border-color: #ff6b6b;
		box-shadow: 0 2px 4px rgba(255, 107, 107, 0.3);
	}

	i {
		color: #ff6b6b;
	}
}

.apply-healing-button {
	border-color: #5bb85c;
	color: #66cc66;

	&:hover {
		border-color: #66cc66;
		box-shadow: 0 2px 4px rgba(102, 204, 102, 0.3);
	}

	i {
		color: #66cc66;
	}
}

/* Damage Application Chat Messages */
.damage-application-message {
	background: linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(11, 10, 19, 0.9) 100%);
	border: 1px solid #d32f2f;
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: #ff7043;
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: #ff7043;
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: #ffab91;
			font-weight: 600;
		}
	}

	.damage-warning {
		color: #ff6b6b !important;
		font-weight: bold !important;
		font-style: italic;
		background: rgba(255, 107, 107, 0.1);
		border: 1px solid rgba(255, 107, 107, 0.3);
		border-radius: 4px;
		padding: 4px 8px;
		margin-top: 8px;
	}
}

.healing-application-message {
	background: linear-gradient(135deg, rgba(46, 64, 34, 0.9) 0%, rgba(19, 40, 29, 0.9) 100%);
	border: 1px solid #5bb85c;
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: #66cc66;
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: #66cc66;
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: #a5d6a7;
			font-weight: 600;
		}
	}

	.healing-success {
		color: #66cc66 !important;
		font-weight: bold !important;
		font-style: italic;
		background: rgba(102, 204, 102, 0.1);
		border: 1px solid rgba(102, 204, 102, 0.3);
		border-radius: 4px;
		padding: 4px 8px;
		margin-top: 8px;
	}
}

/* GM Info Messages */
.damage-gm-info,
.healing-gm-info {
	padding: 0.5em;
	margin: 0.25em 0;
	border-radius: 5px;
	background: rgba(11, 10, 19, 0.7);
	border: 1px solid #6d6795;
	font-size: 0.9em;

	h4 {
		margin: 0 0 0.25em 0;
		color: #c4c4c4;
		font-size: 1em;
		border: none;
		display: flex;
		align-items: center;
		gap: 0.5em;

		i {
			color: #c4c4c4;
		}
	}

	p {
		color: #b0b0b0;
		margin: 0.25em 0;
		font-size: 0.85em;
	}
}

/* Undo Buttons */
.undo-damage-button,
.undo-healing-button {
	background: linear-gradient(135deg, rgba(108, 117, 125, 0.8) 0%, rgba(52, 58, 64, 0.8) 100%);
	border: 1px solid #6c757d;
	border-radius: 4px;
	color: #f8f9fa;
	padding: 6px 12px;
	font-size: 0.85em;
	cursor: pointer;
	transition: all 0.2s ease;

	&:hover {
		background: linear-gradient(135deg, rgba(108, 117, 125, 1) 0%, rgba(52, 58, 64, 1) 100%);
		border-color: #adb5bd;
		transform: translateY(-1px);
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
	}

	i {
		margin-right: 4px;
	}
}

/* Resource Button Styling - Global Design System */
.dh-resource-btn {
	/* Base button styling from global design system */
	display: inline-block;
	padding: 0.1rem 0.3rem;
	margin: 0 0.05rem;
	border: none;
	border-radius: 0.2rem;
	font-size: 0.7rem;
	font-weight: 400;
	text-decoration: none;
	text-transform: none;
	letter-spacing: 0.01em;
	cursor: pointer;
	transition: all 0.15s ease;
	white-space: nowrap;
	vertical-align: baseline;
	line-height: 1.2;

	/* Glassmorphism effect */
	background: rgba(255, 255, 255, 0.08);
	backdrop-filter: blur(4px);
	border: 1px solid rgba(255, 255, 255, 0.15);
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
	color: var(--dh-color-off-white);

	/* Primary button variant */
	&.dh-btn--primary {
		background: rgba(243, 194, 103, 0.12);
		border: 1px solid rgba(243, 194, 103, 0.25);
		color: var(--dh-color-gold);
		box-shadow:
			0 1px 3px rgba(0, 0, 0, 0.2),
			0 0 4px rgba(243, 194, 103, 0.15);
	}

	/* Hover effects */
	&:hover {
		transform: translateY(-0.5px);
		box-shadow:
			0 2px 6px rgba(0, 0, 0, 0.3),
			0 0 6px rgba(243, 194, 103, 0.2);
		background: rgba(243, 194, 103, 0.18);
		border-color: rgba(243, 194, 103, 0.35);
	}

	/* Active/pressed state */
	&:active {
		transform: translateY(0);
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
	}

	/* Focus state for accessibility */
	&:focus {
		outline: 1px solid rgba(243, 194, 103, 0.4);
		outline-offset: 1px;
	}
}

/* Unified Button Styling - Apply glassmorphism only to Daggerheart-specific elements */
/* Inline rolls, content links, and rollable buttons within Daggerheart contexts */
.daggerheart a.inline-roll,
.daggerheart a.inline-roll.roll,
.daggerheart a.content-link,
.daggerheart .content-link,
.daggerheart .inline-roll,
.daggerheart .rollable,
.daggerheart .roll-link,
.daggerheart .document-link,
.daggerheart .entity-link,
.chat-message .daggerheart a.inline-roll,
.chat-message .daggerheart .inline-roll,
.chat-message .daggerheart .rollable {
	/* Apply same glassmorphism styling as resource buttons */
	display: inline-block;
	padding: 0.1rem 0.3rem;
	margin: 0 0.05rem;
	border: none;
	border-radius: 0.2rem;
	font-size: 0.7rem;
	font-weight: 400;
	text-decoration: none;
	text-transform: none;
	letter-spacing: 0.01em;
	cursor: pointer;
	transition: all 0.15s ease;
	white-space: nowrap;
	vertical-align: baseline;
	line-height: 1.2;

	/* Glassmorphism effect */
	background: rgba(243, 194, 103, 0.12) !important;
	backdrop-filter: blur(4px);
	border: 1px solid rgba(243, 194, 103, 0.25) !important;
	box-shadow:
		0 1px 3px rgba(0, 0, 0, 0.2),
		0 0 4px rgba(243, 194, 103, 0.15);
	color: var(--dh-color-gold) !important;
	font-family: var(--font-body);

	/* Icon styling */
	i {
		color: var(--dh-color-gold) !important;
		margin-right: 0.25em;
	}

	/* Hover effects */
	&:hover {
		transform: translateY(-0.5px) !important;
		box-shadow:
			0 2px 6px rgba(0, 0, 0, 0.3),
			0 0 6px rgba(243, 194, 103, 0.2) !important;
		background: rgba(243, 194, 103, 0.18) !important;
		border-color: rgba(243, 194, 103, 0.35) !important;
		color: var(--dh-color-gold) !important;
	}

	/* Active/pressed state */
	&:active {
		transform: translateY(0) !important;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
	}

	/* Focus state for accessibility */
	&:focus {
		outline: 1px solid rgba(243, 194, 103, 0.4) !important;
		outline-offset: 1px;
	}
}

/* Macro Hotbar Button Styling - Remove global styling, only apply to Daggerheart-specific macros if needed */
/* Note: Removed global macro styling to prevent affecting all FoundryVTT macros */

/* Control Tool Buttons - Remove global styling, only apply to Daggerheart-specific controls if needed */
/* Note: Removed global control tool styling to prevent affecting all FoundryVTT canvas controls */

/* Dialog and Form Buttons - Only target Daggerheart-specific dialogs and forms */
.daggerheart-dialog .dialog-buttons button,
.daggerheart .dialog .dialog-buttons button,
.daggerheart .form-group button,
.daggerheart .form-footer button,
.daggerheart button.default,
.daggerheart button[type='submit'],
.daggerheart input[type='submit'],
.daggerheart .button,
.daggerheart-dialog button,
.daggerheart-dialog input[type='submit'] {
	/* Apply glassmorphism to form buttons */
	background: rgba(243, 194, 103, 0.12) !important;
	backdrop-filter: blur(4px);
	border: 1px solid rgba(243, 194, 103, 0.25) !important;
	border-radius: 0.3rem;
	box-shadow:
		0 1px 3px rgba(0, 0, 0, 0.2),
		0 0 4px rgba(243, 194, 103, 0.15);
	transition: all 0.15s ease;
	color: var(--dh-color-gold) !important;
	padding: 0.4rem 0.8rem;
	font-weight: 500;
	text-transform: none;
	letter-spacing: 0.01em;
	cursor: pointer;

	/* Hover effects */
	&:hover {
		transform: translateY(-0.5px) !important;
		box-shadow:
			0 2px 6px rgba(0, 0, 0, 0.3),
			0 0 6px rgba(243, 194, 103, 0.2) !important;
		background: rgba(243, 194, 103, 0.18) !important;
		border-color: rgba(243, 194, 103, 0.35) !important;
	}

	/* Active/pressed state */
	&:active {
		transform: translateY(0) !important;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
	}

	/* Disabled state */
	&:disabled {
		opacity: 0.5;
		cursor: not-allowed;
		transform: none !important;
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;
	}
}

/* Directory Item Controls - Only target Daggerheart-specific directories */
.daggerheart .directory-item .item-controls .item-control,
.daggerheart .directory-header .header-control,
.daggerheart .folder-header .folder-control {
	/* Apply glassmorphism to directory controls */
	background: rgba(243, 194, 103, 0.12) !important;
	backdrop-filter: blur(4px);
	border: 1px solid rgba(243, 194, 103, 0.25) !important;
	border-radius: 0.2rem;
	box-shadow:
		0 1px 3px rgba(0, 0, 0, 0.2),
		0 0 4px rgba(243, 194, 103, 0.15);
	transition: all 0.15s ease;
	color: var(--dh-color-gold) !important;
	padding: 0.2rem 0.3rem;

	/* Hover effects */
	&:hover {
		transform: translateY(-0.5px) !important;
		box-shadow:
			0 2px 6px rgba(0, 0, 0, 0.3),
			0 0 6px rgba(243, 194, 103, 0.2) !important;
		background: rgba(243, 194, 103, 0.18) !important;
		border-color: rgba(243, 194, 103, 0.35) !important;
	}
}

/* Chat Control Buttons - Only target Daggerheart-specific chat controls */
.daggerheart #chat-controls .chat-control-icon,
.daggerheart .chat-control-icon {
	/* Apply glassmorphism to chat controls */
	background: rgba(243, 194, 103, 0.12) !important;
	backdrop-filter: blur(4px);
	border: 1px solid rgba(243, 194, 103, 0.25) !important;
	border-radius: 0.3rem;
	box-shadow:
		0 1px 3px rgba(0, 0, 0, 0.2),
		0 0 4px rgba(243, 194, 103, 0.15);
	transition: all 0.15s ease;
	color: var(--dh-color-gold) !important;

	/* Hover effects */
	&:hover {
		transform: translateY(-0.5px) !important;
		box-shadow:
			0 2px 6px rgba(0, 0, 0, 0.3),
			0 0 6px rgba(243, 194, 103, 0.2) !important;
		background: rgba(243, 194, 103, 0.18) !important;
		border-color: rgba(243, 194, 103, 0.35) !important;
	}
}

/* Legacy fear button styling for backward compatibility */
.dh-fear-btn {
	@extend .dh-resource-btn;

	&[data-action='spendFear'] {
		background: rgba(220, 38, 127, 0.15);
		border: 1px solid rgba(220, 38, 127, 0.3);
		color: #dc267f;

		&:hover {
			background: rgba(220, 38, 127, 0.2);
			border-color: rgba(220, 38, 127, 0.4);
			box-shadow:
				0 4px 12px rgba(0, 0, 0, 0.4),
				0 0 12px rgba(220, 38, 127, 0.3);
		}
	}

	&[data-action='gainFear'] {
		background: rgba(255, 140, 0, 0.15);
		border: 1px solid rgba(255, 140, 0, 0.3);
		color: #ff8c00;

		&:hover {
			background: rgba(255, 140, 0, 0.2);
			border-color: rgba(255, 140, 0, 0.4);
			box-shadow:
				0 4px 12px rgba(0, 0, 0, 0.4),
				0 0 12px rgba(255, 140, 0, 0.3);
		}
	}
}

/* Death Move Messages */
.death-move-blaze {
	padding: 1em;
	margin: 0.5em 0;
	background:
		radial-gradient(
			ellipse at bottom,
			rgba(255, 69, 0, 0.8) 0%,
			rgba(255, 140, 0, 0.6) 30%,
			rgba(255, 193, 7, 0.4) 60%,
			transparent 100%
		),
		linear-gradient(135deg, rgba(255, 140, 0, 0.6), rgba(255, 69, 0, 0.6));
	border: 2px solid #ff8c00;
	border-radius: 10px;
	position: relative;
	overflow: hidden;
	box-shadow:
		0 0 20px rgba(255, 69, 0, 0.6),
		inset 0 0 20px rgba(255, 140, 0, 0.3);

	&::before {
		content: '';
		position: absolute;
		top: -100%;
		left: -50%;
		width: 200%;
		height: 300%;
		background:
			radial-gradient(ellipse at center, rgba(255, 69, 0, 0.7) 0%, rgba(255, 140, 0, 0.5) 20%, transparent 50%),
			radial-gradient(ellipse at 30% 80%, rgba(255, 193, 7, 0.6) 0%, transparent 40%),
			radial-gradient(ellipse at 70% 90%, rgba(255, 87, 34, 0.5) 0%, transparent 30%);
		animation: blazeGlow 2s ease-in-out infinite;
	}

	&::after {
		content: '';
		position: absolute;
		top: -50%;
		left: -25%;
		width: 150%;
		height: 200%;
		background:
			radial-gradient(ellipse at 20% 100%, rgba(255, 140, 0, 0.4) 0%, transparent 60%),
			radial-gradient(ellipse at 80% 100%, rgba(255, 69, 0, 0.4) 0%, transparent 60%);
		animation: blazeFlicker 1.5s ease-in-out infinite alternate;
	}

	p {
		position: relative;
		z-index: 2;
		margin: 0.5em 0;
		text-align: center;
		color: #ffffff;
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
	}

	strong {
		color: #ffeb3b;
		font-size: 1.2em;
		text-shadow:
			0 0 10px rgba(255, 235, 59, 0.8),
			0 0 20px rgba(255, 193, 7, 0.6),
			2px 2px 4px rgba(0, 0, 0, 0.8);
	}

	em {
		color: #ffd54f;
		display: block;
		margin-top: 0.5em;
		text-shadow:
			0 0 8px rgba(255, 213, 79, 0.8),
			2px 2px 4px rgba(0, 0, 0, 0.8);
	}
}

.death-move-blaze-complete {
	padding: 1.5em;
	margin: 0.5em 0;
	background:
		radial-gradient(
			ellipse at center,
			rgba(255, 69, 0, 0.4) 0%,
			rgba(255, 140, 0, 0.3) 30%,
			rgba(30, 30, 30, 0.95) 70%
		),
		linear-gradient(135deg, rgba(30, 30, 30, 0.95), rgba(60, 60, 60, 0.95));
	border: 3px solid #ffeb3b;
	border-radius: 15px;
	box-shadow:
		inset 0 0 30px rgba(0, 0, 0, 0.8),
		0 0 40px rgba(255, 235, 59, 0.6),
		0 0 60px rgba(255, 140, 0, 0.4);
	text-align: center;
	position: relative;
	overflow: hidden;
	animation: blazeComplete 3s ease-in-out infinite;

	&::before {
		content: '';
		position: absolute;
		top: -50%;
		left: -50%;
		width: 200%;
		height: 200%;
		background:
			radial-gradient(circle at 30% 70%, rgba(255, 193, 7, 0.3) 0%, transparent 40%),
			radial-gradient(circle at 70% 80%, rgba(255, 87, 34, 0.2) 0%, transparent 50%);
		animation: blazeCompleteGlow 4s ease-in-out infinite;
		pointer-events: none;
	}

	strong {
		color: #ffeb3b;
		font-size: 1.3em;
		text-shadow:
			0 0 15px rgba(255, 235, 59, 1),
			0 0 30px rgba(255, 193, 7, 0.8),
			0 0 45px rgba(255, 140, 0, 0.6);
		display: block;
		margin-bottom: 0.5em;
		position: relative;
		z-index: 1;
	}

	em {
		color: #ffffff;
		font-size: 1.1em;
		line-height: 1.4;
		text-shadow:
			0 0 10px rgba(255, 255, 255, 0.8),
			2px 2px 4px rgba(0, 0, 0, 0.8);
		position: relative;
		z-index: 1;
	}
}

@keyframes blazeComplete {
	0%,
	100% {
		box-shadow:
			inset 0 0 30px rgba(0, 0, 0, 0.8),
			0 0 40px rgba(255, 235, 59, 0.6),
			0 0 60px rgba(255, 140, 0, 0.4);
	}

	50% {
		box-shadow:
			inset 0 0 30px rgba(0, 0, 0, 0.8),
			0 0 50px rgba(255, 235, 59, 0.8),
			0 0 80px rgba(255, 140, 0, 0.6);
	}
}

@keyframes blazeCompleteGlow {
	0% {
		transform: rotate(0deg) scale(1);
		opacity: 0.3;
	}

	33% {
		transform: rotate(120deg) scale(1.1);
		opacity: 0.5;
	}

	66% {
		transform: rotate(240deg) scale(0.9);
		opacity: 0.4;
	}

	100% {
		transform: rotate(360deg) scale(1);
		opacity: 0.3;
	}
}

@keyframes blazeGlow {
	0% {
		transform: rotate(0deg) scale(1) translateY(0);
		opacity: 0.7;
	}

	25% {
		transform: rotate(45deg) scale(1.1) translateY(-10px);
		opacity: 0.9;
	}

	50% {
		transform: rotate(90deg) scale(1.2) translateY(-20px);
		opacity: 1;
	}

	75% {
		transform: rotate(135deg) scale(1.1) translateY(-10px);
		opacity: 0.9;
	}

	100% {
		transform: rotate(180deg) scale(1) translateY(0);
		opacity: 0.7;
	}
}

@keyframes blazeFlicker {
	0% {
		transform: scale(1) translateX(0) translateY(0);
		opacity: 0.6;
	}

	20% {
		transform: scale(1.05) translateX(-2px) translateY(-5px);
		opacity: 0.8;
	}

	40% {
		transform: scale(0.95) translateX(2px) translateY(-3px);
		opacity: 0.7;
	}

	60% {
		transform: scale(1.1) translateX(-1px) translateY(-8px);
		opacity: 0.9;
	}

	80% {
		transform: scale(0.98) translateX(3px) translateY(-2px);
		opacity: 0.6;
	}

	100% {
		transform: scale(1.02) translateX(0) translateY(-5px);
		opacity: 0.8;
	}
}

.death-move-avoid {
	padding: 1em;
	margin: 0.5em 0;
	background: linear-gradient(135deg, rgba(33, 150, 243, 0.3), rgba(3, 169, 244, 0.3));
	border: 2px solid #42a5f5;
	border-radius: 10px;
	text-align: center;

	strong {
		color: #81d4fa;
		font-size: 1.1em;
		text-shadow: 0 0 8px rgba(129, 212, 250, 0.6);
	}

	em {
		color: #ffffff;
		opacity: 0.95;
	}
}

.death-move-avoid-result {
	padding: 1.2em;
	margin: 0.5em 0;
	background: rgba(30, 30, 30, 0.9);
	border: 2px solid #42a5f5;
	border-radius: 10px;
	position: relative;

	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: radial-gradient(ellipse at center, transparent 0%, rgba(66, 165, 245, 0.1) 100%);
		border-radius: 8px;
		pointer-events: none;
	}

	> * {
		position: relative;
		z-index: 1;
	}

	p {
		margin: 0.5em 0;
		text-align: center;
		color: #ffffff;

		&:first-child {
			font-size: 1.2em;
			color: #81d4fa;
			margin-bottom: 1em;
			font-weight: bold;
		}

		strong {
			color: #ffeb3b;
			font-size: 1.1em;
		}
	}

	.scar-gained {
		color: #ffffff;
		font-size: 1.1em;
		margin-top: 1em;
		padding: 0.5em;
		background: rgba(244, 67, 54, 0.3);
		border: 1px solid #f44336;
		border-radius: 5px;
	}

	.scar-avoided {
		color: #ffffff;
		font-size: 1.1em;
		margin-top: 1em;
		padding: 0.5em;
		background: rgba(76, 175, 80, 0.3);
		border: 1px solid #4caf50;
		border-radius: 5px;
	}

	.scar-note {
		font-size: 0.9em;
		color: #e0e0e0;
		font-style: italic;
		margin-top: 0.5em;
	}
}

.death-move-risk {
	padding: 1em;
	margin: 0.5em 0;
	background: linear-gradient(135deg, rgba(156, 39, 176, 0.3), rgba(103, 58, 183, 0.3));
	border: 2px solid #ab47bc;
	border-radius: 10px;
	text-align: center;
	position: relative;
	overflow: hidden;

	&::before {
		content: '';
		position: absolute;
		top: -50%;
		left: -50%;
		width: 200%;
		height: 200%;
		background: radial-gradient(circle, rgba(156, 39, 176, 0.2) 0%, transparent 70%);
		animation: riskPulse 2s ease-in-out infinite;
	}

	> * {
		position: relative;
		z-index: 1;
	}

	p {
		color: #ffffff;
	}

	strong {
		color: #e1bee7;
		font-size: 1.2em;
		text-shadow: 0 0 10px rgba(225, 190, 231, 0.8);
	}

	em {
		color: #f3e5f5;
		opacity: 0.95;
	}
}

.death-move-risk-critical {
	padding: 1.5em;
	margin: 0.5em 0;
	background: linear-gradient(135deg, rgba(255, 235, 59, 0.2), rgba(255, 193, 7, 0.2));
	border: 3px solid #ffeb3b;
	border-radius: 15px;
	box-shadow:
		0 0 20px rgba(255, 235, 59, 0.6),
		inset 0 0 20px rgba(255, 235, 59, 0.1);
	text-align: center;
	animation: criticalGlow 1.5s ease-in-out infinite;

	p {
		color: #ffffff;

		&:first-child {
			font-size: 1.3em;
			color: #ffeb3b;
			font-weight: bold;
			text-transform: uppercase;
			margin-bottom: 0.5em;
			text-shadow: 0 0 15px rgba(255, 235, 59, 0.8);
		}
	}

	.miracle {
		color: #fff9c4;
		font-size: 1.2em;
		margin: 1em 0;
	}

	.full-heal {
		color: #ffffff;
		font-weight: bold;
		background: rgba(76, 175, 80, 0.4);
		border: 1px solid #4caf50;
		padding: 0.5em;
		border-radius: 8px;
		margin-top: 1em;
	}
}

.death-move-risk-hope {
	padding: 1.2em;
	margin: 0.5em 0;
	background: linear-gradient(135deg, rgba(76, 175, 80, 0.3), rgba(67, 160, 71, 0.3));
	border: 2px solid #66bb6a;
	border-radius: 10px;
	text-align: center;

	p {
		color: #ffffff;

		&:first-child {
			font-size: 1.2em;
			color: #a5d6a7;
			font-weight: bold;
			margin-bottom: 0.5em;
			text-shadow: 0 0 8px rgba(165, 214, 167, 0.6);
		}
	}

	.recovery-available {
		color: #ffffff;
		font-size: 1.1em;
		background: rgba(255, 235, 59, 0.3);
		border: 1px solid #ffeb3b;
		padding: 0.5em;
		border-radius: 5px;
		margin-top: 1em;
	}
}

.death-move-risk-death {
	padding: 1.2em;
	margin: 0.5em 0;
	background: linear-gradient(135deg, rgba(244, 67, 54, 0.4), rgba(139, 0, 0, 0.6));
	border: 2px solid #f44336;
	border-radius: 10px;
	text-align: center;
	box-shadow: inset 0 0 20px rgba(244, 67, 54, 0.3);

	p {
		color: #ffffff;

		&:first-child {
			font-size: 1.2em;
			color: #ffcdd2;
			font-weight: bold;
			margin-bottom: 0.5em;
			text-shadow: 0 0 8px rgba(255, 205, 210, 0.6);
		}
	}

	.final-words {
		color: #e0e0e0;
		font-style: italic;
		margin: 1em 0;
	}

	.death-result {
		color: #ffffff;
		font-weight: bold;
		background: rgba(139, 0, 0, 0.4);
		border: 1px solid #8b0000;
		padding: 0.5em;
		border-radius: 5px;
		margin-top: 1em;
	}
}

.death-move-risk-recovery {
	padding: 1em;
	margin: 0.5em 0;
	background: linear-gradient(135deg, rgba(76, 175, 80, 0.3), rgba(129, 204, 195, 0.3));
	border: 2px solid #66bb6a;
	border-radius: 10px;
	text-align: center;

	p {
		color: #ffffff;

		&:first-child {
			font-size: 1.1em;
			color: #a5d6a7;
			font-weight: bold;
			margin-bottom: 0.5em;
			text-shadow: 0 0 8px rgba(165, 214, 167, 0.6);
		}
	}

	.recovery-result {
		color: #fff9c4;
		font-style: italic;
		margin-top: 0.5em;
	}
}

@keyframes riskPulse {
	0%,
	100% {
		transform: scale(1);
		opacity: 0.3;
	}

	50% {
		transform: scale(1.05);
		opacity: 0.6;
	}
}

/* Clickable Dice Reroll Styling */
.dice-rolls .roll.die.clickable-die {
	cursor: pointer;
	transition: all 0.25s ease;
	position: relative;

	&:hover {
		transform: scale(1.2) rotate(8deg);
		filter: brightness(1.3) saturate(1.4) drop-shadow(0 0 8px rgba(243, 194, 103, 0.8));
	}

	&:active {
		transform: scale(1.1) rotate(4deg);
		filter: brightness(1.1) saturate(1.2);
	}

	/* Hope die specific styling */
	&.hope-die:hover {
		filter: brightness(1.4) saturate(1.5) drop-shadow(0 0 12px rgba(243, 194, 103, 1));
	}

	/* Fear die specific styling */
	&.fear-die:hover {
		filter: brightness(1.4) saturate(1.5) drop-shadow(0 0 12px rgba(59, 117, 194, 1));
	}

	/* Rerolling state */
	&.rerolling {
		cursor: wait;
		opacity: 0.7;
		animation: rerollingPulse 0.5s ease-in-out infinite;
	}

	/* Reroll animation */
	&.rerolled {
		animation: diceReroll 1s ease-out;
	}
}

/* Keyframes for reroll animations */
@keyframes rerollingPulse {
	0%,
	100% {
		opacity: 0.7;
		transform: scale(1);
	}

	50% {
		opacity: 1;
		transform: scale(1.05);
	}
}

@keyframes diceReroll {
	0% {
		transform: rotateY(0deg) scale(1);
	}

	25% {
		transform: rotateY(90deg) scale(1.1);
	}

	50% {
		transform: rotateY(180deg) scale(1.2);
	}

	75% {
		transform: rotateY(270deg) scale(1.1);
	}

	100% {
		transform: rotateY(360deg) scale(1);
	}
}

/* Hide the dice tooltip that appears on hover */
.dice-tooltip .tooltip-part .dice-rolls .roll.die.clickable-die::after {
	display: none !important;
}

/* Reroll instruction text styling */
.reroll-instruction {
	background: rgba(243, 194, 103, 0.15);
	border: 1px solid rgba(243, 194, 103, 0.3);
	border-radius: 10px;
	padding: 8px 12px;
	margin-bottom: 8px;
	color: var(--dh-color-gold);
	font-size: 0.85em;
	font-weight: 500;
	text-align: center;
	backdrop-filter: blur(4px);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

	&:hover {
		background: rgba(243, 194, 103, 0.2);
		border-color: rgba(243, 194, 103, 0.4);
	}
}

@keyframes rerollingPulse {
	0%,
	100% {
		transform: scale(1);
		opacity: 0.7;
	}

	50% {
		transform: scale(1.05);
		opacity: 0.9;
	}
}

@keyframes diceReroll {
	0% {
		transform: scale(1) rotateY(0deg);
		background: rgba(255, 255, 255, 0.8);
	}

	25% {
		transform: scale(1.2) rotateY(90deg);
		background: rgba(243, 194, 103, 0.6);
	}

	50% {
		transform: scale(1.3) rotateY(180deg);
		background: rgba(243, 194, 103, 0.8);
	}

	75% {
		transform: scale(1.2) rotateY(270deg);
		background: rgba(243, 194, 103, 0.6);
	}

	100% {
		transform: scale(1) rotateY(360deg);
		background: transparent;
	}
}

/* Tooltip styling for clickable dice */
.dice-tooltip .tooltip-part .dice-rolls .roll.die.clickable-die {
	&::after {
		content: 'Click to reroll';
		position: absolute;
		bottom: -20px;
		left: 50%;
		transform: translateX(-50%);
		background: rgba(0, 0, 0, 0.8);
		color: white;
		padding: 2px 6px;
		border-radius: 3px;
		font-size: 10px;
		white-space: nowrap;
		opacity: 0;
		pointer-events: none;
		transition: opacity 0.2s ease;
		z-index: 1000;
	}

	&:hover::after {
		opacity: 1;
	}
}

/* Fear Spend Message Styling */
.fear-spend-message {
	background: linear-gradient(135deg, rgba(30, 24, 77, 0.9) 0%, rgba(11, 10, 19, 0.9) 100%);
	border: 1px solid var(--dh-color-purple-light);
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: var(--dh-color-gold);
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: var(--dh-color-gold);
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: var(--dh-color-teal);
			font-weight: 600;
		}
	}
}

.fear-gain-message {
	background: linear-gradient(135deg, rgba(77, 38, 77, 0.9) 0%, rgba(11, 10, 19, 0.9) 100%);
	border: 1px solid #8e24aa;
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: #ce93d8;
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: #ce93d8;
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: #ba68c8;
			font-weight: 600;
		}
	}

	.fear-warning {
		color: #e91e63 !important;
		font-weight: bold !important;
		font-style: italic;
		background: rgba(233, 30, 99, 0.1);
		border: 1px solid rgba(233, 30, 99, 0.3);
		border-radius: 4px;
		padding: 4px 8px;
		margin-top: 8px;
	}
}

/* Stress Spend Message Styling */
.stress-spend-message {
	background: linear-gradient(135deg, rgba(77, 38, 38, 0.9) 0%, rgba(11, 10, 19, 0.9) 100%);
	border: 1px solid #d32f2f;
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: #ff7043;
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: #ff7043;
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: #ffab91;
			font-weight: 600;
		}
	}

	.stress-warning {
		color: #f44336 !important;
		font-weight: bold !important;
		font-style: italic;
		background: rgba(244, 67, 54, 0.1);
		border: 1px solid rgba(244, 67, 54, 0.3);
		border-radius: 4px;
		padding: 4px 8px;
		margin-top: 8px;
	}
}

/* Stress Clear Message Styling */
.stress-clear-message {
	background: linear-gradient(135deg, rgba(38, 77, 38, 0.9) 0%, rgba(10, 19, 10, 0.9) 100%);
	border: 1px solid #4caf50;
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: #81c784;
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: #81c784;
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: #a5d6a7;
			font-weight: 500;
		}
	}
}

/* Armor Slot Message Styling */
.armor-slot-message {
	background: linear-gradient(135deg, rgba(96, 125, 139, 0.9) 0%, rgba(37, 47, 63, 0.9) 100%);
	border: 1px solid #607d8b;
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: #90a4ae;
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: #90a4ae;
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: #b0bec5;
			font-weight: 500;
		}
	}
}

/* HP Adjust Message Styling */
.hp-adjust-message {
	background: linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(62, 39, 35, 0.9) 100%);
	border: 1px solid #8b4513;
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: #cd853f;
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: #cd853f;
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: #deb887;
			font-weight: 500;
		}
	}
}

/* Hope Message Styling */
.hope-spend-message {
	background: linear-gradient(135deg, rgba(57, 77, 77, 0.9) 0%, rgba(11, 10, 19, 0.9) 100%);
	border: 1px solid var(--dh-color-teal);
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: var(--dh-color-gold);
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: var(--dh-color-gold);
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: var(--dh-color-teal);
			font-weight: 600;
		}
	}

	.hope-warning {
		color: #ff9800 !important;
		font-weight: bold !important;
		font-style: italic;
		background: rgba(255, 152, 0, 0.1);
		border: 1px solid rgba(255, 152, 0, 0.3);
		border-radius: 4px;
		padding: 4px 8px;
		margin-top: 8px;
	}
}

.hope-gain-message {
	background: linear-gradient(135deg, rgba(77, 77, 38, 0.9) 0%, rgba(11, 10, 19, 0.9) 100%);
	border: 1px solid var(--dh-color-gold);
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: var(--dh-color-gold);
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
		text-transform: uppercase;
		letter-spacing: 1px;
		border-bottom: none;

		i {
			margin-right: 8px;
			color: var(--dh-color-gold);
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: var(--dh-color-gold);
			font-weight: 600;
		}
	}

	.hope-max {
		color: #ffeb3b !important;
		font-weight: bold !important;
		font-style: italic;
		background: rgba(255, 235, 59, 0.1);
		border: 1px solid rgba(255, 235, 59, 0.3);
		border-radius: 4px;
		padding: 4px 8px;
		margin-top: 8px;
	}
}

/* Undo Button Styling */
.undo-damage-button,
.undo-healing-button {
	background: rgba(11, 10, 19, 0.85);
	border: 1px solid #6d6795;
	border-radius: 0.75em;
	color: #c4c4c4;
	padding: 0.4em 0.8em;
	cursor: pointer;
	font-size: 0.9em;
	font-weight: 500;
	transition: all 0.3s ease;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 0.4em;

	&:hover {
		background: rgba(35, 34, 43, 0.9);
		border-color: #9d9bb3;
		transform: translateY(-1px);
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
		color: #e1e1e1;
	}

	&:disabled {
		cursor: not-allowed;
		opacity: 0.6;
		transform: none;
		background: rgba(11, 10, 19, 0.4);
	}

	i {
		font-size: 0.9em;
		color: inherit;
	}
}

/* Undo Message Styling */
.undo-message {
	padding: 1em;
	margin: 0.5em 0;
	border-radius: 10px;
	background: rgba(11, 10, 19, 0.85);
	border: 1px solid #6d6795;

	h3 {
		margin: 0 0 0.5em 0;
		color: #c4c4c4;
		font-size: 1.1em;
		border: none;
		display: flex;
		align-items: center;
		gap: 0.5em;

		i {
			color: #c4c4c4;
		}
	}

	.undo-details {
		margin: 0.5em 0;
		padding: 0.5em;
		background: rgba(0, 0, 0, 0.3);
		border-radius: 5px;
		border-left: 3px solid #6d6795;
		font-style: italic;
		color: #b0b0b0;
	}
}

/* Hope and Fear Dice Tooltip Styling */

/* Hope Die Styling - Golden appearance using filters */
.dice-tooltip .dice-rolls .roll.die.hope-die,
.dice-tooltip .dice-rolls .roll.die[data-flavor='Hope'] {
	color: #000 !important;
	filter: sepia(1) hue-rotate(15deg) saturate(1.8) brightness(1.1) !important;
	font-weight: bold !important;
}

/* Fear Die Styling - Red appearance using filters */
.dice-tooltip .dice-rolls .roll.die.fear-die,
.dice-tooltip .dice-rolls .roll.die[data-flavor='Fear'] {
	color: #000 !important;
	filter: sepia(1) hue-rotate(-175deg) saturate(2) brightness(0.9) !important;
	font-weight: bold !important;
}

/* Hope and Fear Flavor Text Styling */
.dice-tooltip .tooltip-part .part-header .part-flavor.hope-flavor {
	color: var(--dh-color-gold) !important;
}

.dice-tooltip .tooltip-part .part-header .part-flavor.fear-flavor {
	color: #3b75c2 !important;
}

/* Hope and Fear Text in Roll Results */
.roll-flavor-line .hope-result {
	color: var(--dh-color-gold) !important;
}

.roll-flavor-line .fear-result {
	color: #3b75c2 !important;
}

/* Hope Automation Notice Styling */
.hope-automation-notice {
	background: linear-gradient(135deg, rgba(255, 187, 0, 0.1) 0%, rgba(129, 204, 195, 0.1) 100%);
	border: 1px solid var(--dh-color-gold);
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

	p {
		color: var(--dh-color-off-white);
		font-size: 0.9em;
		margin: 4px 0;
		line-height: 1.4;

		&:first-child {
			color: var(--dh-color-gold);
			font-weight: bold;
			margin-bottom: 8px;
		}

		em {
			color: #6c6a85;
			font-size: 0.85em;
		}

		i {
			margin-right: 6px;
			color: var(--dh-color-gold);
		}
	}
}

// Multi-target armor slots styling - Updated to match hope tracker design pattern
.multi-target-armor-container {
	.multi-target-armor-header {
		text-align: center;
		margin-bottom: 0.75em;

		label {
			font-weight: bold;
			color: var(--dh-color-gold);
			font-size: 0.9em;
			text-transform: uppercase;
			letter-spacing: 1px;
			text-shadow: 0 0 5px rgba(243, 194, 103, 0.6);
		}
	}

	// Individual armor slot containers in multi-target view
	.armor-slots-ui {
		background: rgba(11, 10, 19, 0.85);
		backdrop-filter: blur(5px);
		border: 1px solid #6d6795;
		border-radius: 10px;
		padding: 0.75em;
		margin: 0.5em 0;
		transition: all 0.3s ease;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

		&:hover {
			background: rgba(11, 10, 19, 0.9);
			border-color: var(--dh-color-gold);
			transform: translateY(-1px);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
		}

		.resource-content {
			display: flex;
			justify-content: center;
			margin-bottom: 0.5em;

			.resource-box {
				background: #1c1c1c;
				border: 1px solid var(--dh-color-gold);
				border-radius: 10px;
				padding: 8px 15px;
				color: white;
				font-size: 1.2em;
				font-weight: 700;
				display: flex;
				gap: 5px;
				align-items: center;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
				min-width: 60px;
				justify-content: center;

				.armor-slots-current,
				.armor-slots-max {
					color: var(--dh-color-off-white);
					text-align: center;
					min-width: 1em;
				}

				span {
					color: var(--dh-color-gold);
					font-weight: bold;
				}
			}
		}

		.resource-label-controls {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 0.5em;

			label {
				font-size: 0.85em;
				color: var(--dh-color-off-white);
				text-align: center;
				flex: 1;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 0.5px;
				line-height: 1.2;
				display: flex;
				flex-direction: column;
				gap: 0.2em;

				strong {
					color: var(--dh-color-gold);
					text-shadow: 0 0 5px rgba(243, 194, 103, 0.6);
				}

				.armor-availability {
					font-size: 1em;
					color: #6c6a85;
					font-weight: 400;
					text-transform: none;
					letter-spacing: 0;
					opacity: 0.9;
				}
			}

			.resource-control {
				background: rgba(67, 63, 100, 0.5);
				border: 1px solid #6d6795;
				border-radius: 50%;
				width: 28px;
				height: 28px;
				display: flex;
				align-items: center;
				justify-content: center;
				color: var(--dh-color-off-white);
				cursor: pointer;
				transition: all 0.3s ease;
				font-size: 12px;
				text-decoration: none;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

				&:hover {
					background: rgba(67, 63, 100, 0.8);
					border-color: var(--dh-color-gold);
					color: var(--dh-color-gold);
					transform: scale(1.1);
					box-shadow: 0 0 8px rgba(243, 194, 103, 0.4);
				}

				&:active {
					transform: scale(0.95);
				}

				i {
					color: inherit;
				}
			}
		}
	}
}

/* SHINE EFFECT */
.item-card-chat .card-image-container {
	position: relative;
	overflow: hidden;
}

.item-card-chat .card-image-container::before {
	content: '';
	position: absolute;
	top: 0;
	left: -150%;
	width: 50%;
	height: 100%;
	background: linear-gradient(
		120deg,
		rgba(255, 255, 255, 0) 0%,
		rgba(255, 255, 255, 0.45) 50%,
		rgba(255, 255, 255, 0) 100%
	);
	transform: skewX(-25deg);
	pointer-events: none;
	animation: shineMove 1s ease-in-out forwards;
	z-index: 1;
}

.item-card-chat:hover .card-image-container::before {
	animation: shineMove 1s ease-in-out forwards;
}

.domain-preview-card .card-image-container::before {
	animation: shineMove 1s ease-in-out forwards;
}

@keyframes shineMove {
	0% {
		left: -150%;
	}

	100% {
		left: 150%;
	}
}

.chat-message:has(.item-card-chat) .message-content {
	padding-bottom: 0;
}

.hp-healing-message {
	background: linear-gradient(135deg, rgba(46, 64, 34, 0.9) 0%, rgba(19, 40, 29, 0.9) 100%);
	border: 1px solid #5bb85c;
	border-radius: 8px;
	padding: 12px;
	margin: 4px 0;
	text-align: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

	h3 {
		color: #66cc66;
		font-size: 1.1em;
		font-weight: bold;
		margin: 0 0 8px 0;
		text-transform: uppercase;
		letter-spacing: 1px;

		i {
			margin-right: 8px;
			color: #66cc66;
		}
	}

	p {
		color: var(--dh-color-off-white);
		font-size: 0.95em;
		margin: 4px 0;
		line-height: 1.4;

		&:last-child {
			margin-bottom: 0;
			color: #a5d6a7;
			font-weight: 500;
		}
	}
}

/* Template Button Styling for Range Measurement */
.measured-template-button {
	display: inline-block;
	padding: 0.4rem 0.8rem;
	margin: 0.2rem;
	background: rgba(243, 194, 103, 0.12);
	backdrop-filter: blur(4px);
	border: 1px solid rgba(243, 194, 103, 0.25);
	border-radius: 0.4rem;
	box-shadow:
		0 1px 3px rgba(0, 0, 0, 0.2),
		0 0 4px rgba(243, 194, 103, 0.15);
	color: var(--dh-color-gold);
	font-size: 0.9rem;
	font-weight: 500;
	text-decoration: none;
	cursor: pointer;
	transition: all 0.15s ease;
	white-space: nowrap;
	vertical-align: baseline;
	line-height: 1.2;

	i {
		margin-right: 0.4rem;
		color: var(--dh-color-gold);
	}

	&:hover {
		transform: translateY(-1px);
		box-shadow:
			0 2px 6px rgba(0, 0, 0, 0.3),
			0 0 8px rgba(243, 194, 103, 0.3);
		background: rgba(243, 194, 103, 0.18);
		border-color: rgba(243, 194, 103, 0.35);
		color: var(--dh-color-gold);
		text-decoration: none;
	}

	&:active {
		transform: translateY(0);
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
	}

	&:focus {
		outline: 1px solid rgba(243, 194, 103, 0.4);
		outline-offset: 1px;
	}
}

.duality-roll-button {
	display: inline-flex;
	align-items: center;
	gap: 0.5rem;
	padding: 0.5rem 1rem;
	background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
	color: #ffffff;
	border: 2px solid #718096;
	border-radius: 0.5rem;
	font-weight: 600;
	font-size: 0.875rem;
	cursor: pointer;
	transition: all 0.2s ease-in-out;
	text-decoration: none;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

	&:hover {
		background: linear-gradient(135deg, #718096 0%, #4a5568 100%);
		border-color: #a0aec0;
		transform: translateY(-1px);
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
	}

	&:active {
		transform: translateY(0);
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	i {
		font-size: 1rem;
		color: #f7fafc;
	}
}
